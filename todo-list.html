<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <title>TO-DO List</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
        crossorigin="anonymous"></script>

        <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
        <script src="../node_modules/lit/polyfill-support.js"></script>
        <script type="module" src="../todo-list.js"></script>

        <script>
            window.onload = (event) => {

                const todoListElement = document.getElementsByTagName('todo-list');
                todoListElement[0].addEventListener('create', handleCreate);
            };

            function handleCreate() {

                document.getElementsByName('task-description')[0].removeAttribute('disabled');
                document.getElementsByName('btn-save-task')[0].removeAttribute('disabled');
            }

            function onClickAddTask() {

                const taskDescription = document.getElementsByName('task-description')[0].value;
                const todoListElement = document.getElementsByTagName('todo-list')[0];
                todoListElement.addTask(taskDescription);
                document.getElementsByName('task-description')[0].value = '';
                document.getElementsByName('task-description')[0].setAttribute("disabled", true);
                document.getElementsByName('btn-save-task')[0].setAttribute("disabled", true);
            }
        </script>

    </head>
    <body>
        
        <todo-list onCustomEvent="(e) => handleTodoList(e)">
            <form>
                <input type="text" name="task-description" disabled/>
                <button type="button" onclick="onClickAddTask()" name="btn-save-task" disabled>Save</button>
            </form>
        </todo-list>
    </body>
</html>